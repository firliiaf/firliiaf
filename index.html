<!DOCTYPE html>
<html>
<head>
    <title>Front End</title>
</head>
<body>
    
    <div id='app'>
        <input type="text" id="inputKelas" placeholder="Nama Kelas">
        <button id="btnAdd">Tambah</button>
        <span id="myLoad"></span>
        <br>
        <ul id='listKelas'>
        </ul>
        
    </div>

    <script type="text/javascript" src="jquery.js"></script>
    
    <script type="text/javascript">
        function loadData() {
            $.ajax({
                url: "http://localhost/Laravel/a-xiirpl2/api/classes",
                type: "GET",
                beforeSend: function(){
                    $("#listKelas").html(`
                        <img src="5.gif" width="10px">
                        `)
                },
                
                success: function(result){
                    $("#listKelas").html('')
                    var myData = JSON.parse(result);

                    $.each(myData, function(i, data){
                        $("#listKelas").append(`
                            <li onclick="deleteData(`+data.id+`)">
                            `+data.nama+`
                            </li>
                            `);

                    })
                }

            })

        }

        $("#btnAdd").click(function(){
            var kelas = $("#inputKelas").val();

            $.ajax({
                url: "http://localhost/Laravel/a-xiirpl2/api/classes",
                type: "POST",
                data: { nama: kelas },
                beforeSend: function(){
                    $("#myLoad").html(`
                        <img src="5.gif" width="10px">
                        `)
                },

                success: function(result){
                    $("#myLoad").html('')
                    $("#inputKelas").val('')
                    loadData()
                },
            })
        })

        function deleteData(id){
            var yakin = confirm("Hapus Data Ini")

            if (yakin) {
                $.ajax({
                    url: "http://localhost/Laravel/a-xiirpl2/api/classes",
                    type: "DELETE",
                    data: { id : id },
                    success: function(result){
                        loadData()
                    }
                })
            }else{
                
            }
        }

        loadData()
    </script>

</body>
</html>